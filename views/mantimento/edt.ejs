<%- include('../cabecalho.ejs') %>

<h1>Editar Mantimento</h1>
<a href="/mantimento/lst">Listar</a>

<form method="post">
    <input type="hidden" name="id" value="<%= Mantimento._id %>">

    <label>ID do Mantimento:</label>
    <input type="text" name="id_mantimento" value="<%= Mantimento.id_mantimento %>" required><br>

    <label>Nome:</label>
    <input type="text" name="nome" value="<%= Mantimento.nome %>" required><br>

    <label>Validade:</label>
    <input type="date" name="validade" value="<%= Mantimento.validade ? Mantimento.validade.toISOString().substring(0,10) : '' %>" required><br>

    <label>Quantidade em Estoque:</label>
    <input type="number" name="quantidade_estoque" value="<%= Mantimento.quantidade_estoque %>" required><br>

    <label>Preço Unitário:</label>
    <input type="number" step="0.01" name="preco_unitario" value="<%= Mantimento.preco_unitario %>" required><br>

    <label>Fornecedor:</label>
    <select name="fornecedor" required>
        <option value="">Selecione o fornecedor</option>
        <% if (Fornecedor && Fornecedor.length) { Fornecedor.forEach(f => { %>
            <option value="<%= f._id %>" <%= Mantimento.fornecedor && (Mantimento.fornecedor.equals ? Mantimento.fornecedor.equals(f._id) : Mantimento.fornecedor.toString() === f._id.toString()) ? 'selected' : '' %>><%= f.nome %></option>
        <% }) } %>
    </select><br>

    <button type="submit">Salvar</button>
</form>

<%- include('../rodape.ejs') %>