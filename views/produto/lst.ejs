<%- include('../cabecalho.ejs') %>

<h1 class="titulo-lista"><i class="fa fa-mug-hot"></i> Lista de Produtos</h1>
<a href="/produto/add" class="btn acao"><i class="fa fa-plus"></i> Adicionar Novo</a>

<form method="post" class="search" action="/produto/lst">
    <label>Pesquisar por nome:</label>
    <input type="text" name="nome">
    <button type="submit" class="btn acao"><i class="fa fa-search"></i> Buscar</button>
</form>

<table class="tabela-lista">
<tr>
    <th>Imagem</th><th>ID</th><th>Nome</th><th>Preço</th><th>Descrição</th><th>Ações</th>
</tr>
<% lista.forEach(p => { %>
<tr>
  <td>
    <% if (p.imagem) { %>
      <img src="/img/<%= p.imagem %>" alt="<%= p.nome %>" style="max-width:80px;max-height:60px;object-fit:cover;border-radius:6px;">
    <% } else { %>
      -
    <% } %>
  </td>
  <td><%= p._id %></td>
  <td><%= p.nome %></td>
    <td><%= p.preco %></td>
    <td><%= p.descricao %></td>
    <td class="acoes">
      <a href="/produto/edt/<%= p._id %>" class="btn acao"><i class="fa fa-edit"></i> Editar</a>
    <a href="/produto/del/<%= p._id %>" class="btn acao" onclick="return confirm('Tem certeza que deseja excluir este produto?')"><i class="fa fa-trash"></i> Excluir</a>
    </td>
</tr>
<% }) %>
</table>

<%- include('../rodape.ejs') %>

<style>
.titulo-lista {
  color: #795548;
  text-align: center;
  margin-bottom: 20px;
}
.tabela-lista {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
  background: #fff8f0;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 12px #e0cfc2;
}
.tabela-lista th {
  background-color: #8d6e63;
  color: #fff;
  padding: 12px;
  text-align: left;
}
.tabela-lista td {
  padding: 10px;
  border-bottom: 1px solid #d7ccc8;
  color: #4e342e;
}
.tabela-lista tr:hover {
  background-color: #f5ebe3;
}
.tabela-lista .acoes {
  display: flex;
  gap: 8px;
}
.btn.acao {
  background-color: #a67c52;
  color: #fff8f0;
  border: none;
  font-weight: 600;
  border-radius: 6px;
  padding: 8px 16px;
  transition: 0.2s;
  box-shadow: 0 1px 4px #e0cfc2;
  margin: 0 4px 8px 0;
}
.btn.acao:hover {
  background-color: #7b5e3b;
  color: #fff;
  opacity: 0.92;
}
.search {
  text-align: right;
  margin-bottom: 10px;
}
.search input {
  width: 200px;
}
</style>